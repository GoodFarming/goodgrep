# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
name = "ggrep"
version = "0.6.0"
authors = ["Can Bölük <me@can.ac>"]
build = "build.rs"
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "Semantic search for mixed code + docs (GoodFarmingAI fork)"
homepage = "https://github.com/GoodFarmingAI/goodgrep"
documentation = "https://github.com/GoodFarmingAI/goodgrep"
readme = "README.md"
keywords = [
    "search",
    "semantic",
    "code",
    "grep",
    "embeddings",
]
categories = [
    "command-line-utilities",
    "development-tools",
    "text-processing",
]
license = "Apache-2.0"
repository = "https://github.com/GoodFarmingAI/goodgrep"

[features]
cuda = [
    "candle-core/cuda",
    "candle-nn/cuda",
    "candle-transformers/cuda",
]
default = []

[lib]
name = "ggrep"
path = "src/lib.rs"

[[bin]]
name = "ggrep"
path = "src/main.rs"

[[example]]
name = "format_chunk_text_demo"
path = "examples/format_chunk_text_demo.rs"

[[example]]
name = "format_demo"
path = "examples/format_demo.rs"

[[test]]
name = "chunker_test"
path = "tests/chunker_test.rs"

[[test]]
name = "format_chunk_text_test"
path = "tests/format_chunk_text_test.rs"

[dependencies.anyhow]
version = "1"

[dependencies.arrow-arith]
version = "56.2.0"

[dependencies.arrow-array]
version = "56.2.0"

[dependencies.arrow-buffer]
version = "56.2.0"

[dependencies.arrow-cast]
version = "56.2.0"

[dependencies.arrow-csv]
version = "56.2.0"

[dependencies.arrow-data]
version = "56.2.0"

[dependencies.arrow-ipc]
version = "56.2.0"

[dependencies.arrow-json]
version = "56.2.0"

[dependencies.arrow-ord]
version = "56.2.0"

[dependencies.arrow-pyarrow]
version = "56.2.0"

[dependencies.arrow-row]
version = "56.2.0"

[dependencies.arrow-schema]
version = "56.2.0"

[dependencies.arrow-select]
version = "56.2.0"

[dependencies.arrow-string]
version = "56.2.0"

[dependencies.async-trait]
version = "0.1"

[dependencies.bytes]
version = "1"

[dependencies.candle-core]
version = "0.9.2-alpha.1"

[dependencies.candle-nn]
version = "0.9.2-alpha.1"

[dependencies.candle-transformers]
version = "0.9.2-alpha.1"

[dependencies.chrono]
version = "0.4.42"

[dependencies.clap]
version = "4"
features = [
    "derive",
    "env",
]

[dependencies.console]
version = "0.16"

[dependencies.crossbeam-channel]
version = "0.5"

[dependencies.directories]
version = "6"

[dependencies.figment]
version = "0.10"
features = [
    "toml",
    "env",
]

[dependencies.flume]
version = "0.11.1"
features = ["async"]

[dependencies.futures]
version = "0.3"

[dependencies.git2]
version = "0.20"

[dependencies.hex]
version = "0.4"

[dependencies.hf-hub]
version = "0.4"

[dependencies.ignore]
version = "0.4"

[dependencies.indicatif]
version = "0.18"

[dependencies.is-terminal]
version = "0.4"

[dependencies.lancedb]
version = "0.22"

[dependencies.memchr]
version = "2"

[dependencies.moka]
version = "0.12.11"
features = ["future"]

[dependencies.ndarray]
version = "0.16"

[dependencies.notify]
version = "8.2"

[dependencies.notify-debouncer-mini]
version = "0.7"

[dependencies.num_cpus]
version = "1"

[dependencies.once_cell]
version = "1"

[dependencies.parking_lot]
version = "0.12"

[dependencies.postcard]
version = "1"
features = ["alloc"]

[dependencies.rayon]
version = "1"

[dependencies.regex]
version = "1"

[dependencies.reqwest]
version = "0.12"
features = ["json"]

[dependencies.rustc_version_runtime]
version = "0.3"

[dependencies.serde]
version = "1"
features = ["derive"]

[dependencies.serde_json]
version = "1"

[dependencies.sha2]
version = "0.10"

[dependencies.smallvec]
version = "1.15.1"

[dependencies.syntect]
version = "5"

[dependencies.tar]
version = "0.4"

[dependencies.thiserror]
version = "2"

[dependencies.tokenizers]
version = "0.22"

[dependencies.tokio]
version = "1"
features = ["full"]

[dependencies.tokio-util]
version = "0.7.17"
features = ["full"]

[dependencies.toml]
version = "0.9"

[dependencies.tracing]
version = "0.1"

[dependencies.tracing-subscriber]
version = "0.3"
features = ["env-filter"]

[dependencies.tree-sitter]
version = "0.25"
features = ["wasm"]

[dependencies.uuid]
version = "1"
features = ["v4"]

[dependencies.walkdir]
version = "2"

[dev-dependencies.tempfile]
version = "3"

[dev-dependencies.tokio-test]
version = "0.4"

[build-dependencies.tar]
version = "0.4"

[lints.clippy]
allow_attributes_without_reason = "warn"
borrow_as_ptr = "allow"
cast_lossless = "allow"
cast_possible_truncation = "allow"
cast_possible_wrap = "allow"
cast_precision_loss = "allow"
cast_ptr_alignment = "allow"
cast_sign_loss = "allow"
default_trait_access = "allow"
enum_glob_use = "allow"
float_cmp = "allow"
inconsistent_struct_constructor = "allow"
inline_always = "allow"
items_after_statements = "allow"
let_underscore_untyped = "allow"
literal_string_with_formatting_args = "allow"
match_same_arms = "allow"
match_wildcard_for_single_variants = "allow"
missing_errors_doc = "allow"
missing_fields_in_debug = "allow"
missing_panics_doc = "allow"
must_use_candidate = "allow"
needless_pass_by_value = "allow"
option_if_let_else = "allow"
ptr_as_ptr = "allow"
redundant_closure_for_method_calls = "allow"
ref_as_ptr = "allow"
return_self_not_must_use = "allow"
significant_drop_tightening = "allow"
similar_names = "allow"
struct_excessive_bools = "allow"
too_many_lines = "allow"
tuple_array_conversions = "allow"
undocumented_unsafe_blocks = "warn"
unreadable_literal = "allow"
unsafe_derive_deserialize = "allow"
verbose_bit_mask = "allow"
wildcard_imports = "allow"

[lints.clippy.all]
level = "warn"
priority = -1

[lints.clippy.correctness]
level = "deny"
priority = -1

[lints.clippy.nursery]
level = "warn"
priority = -1

[lints.clippy.pedantic]
level = "warn"
priority = -1

[lints.clippy.perf]
level = "warn"
priority = -1

[lints.clippy.style]
level = "warn"
priority = -1

[lints.clippy.suspicious]
level = "deny"
priority = -1

[profile.dev]
codegen-units = 256
debug = "line-tables-only"
incremental = true
strip = "none"

[profile.release]
opt-level = 2
lto = "thin"
codegen-units = 8
debug = 0
split-debuginfo = "off"
strip = "symbols"

[profile.test]
inherits = "dev"
